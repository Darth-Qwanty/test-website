import { useEffect, useState } from "react";

export default function useTheme(){
    const [theme, setTheme]=useState(()=>{
        const stored = localStorage.getItem('theme');
        if(stored){
            return stored;
        }
        return window.matchMedia("(prefers-color-scheme: dark)").matches ? 'dark':'light';
    });
    useEffect(()=>{
        document.documentElement.setAttribute('data-theme',theme);
        localStorage.setItem('theme',theme);
    },[theme]);

    const toggleTheme = () =>setTheme(prev=>(prev ==='light'? 'dark' : 'light'));

    return [theme,toggleTheme];
}